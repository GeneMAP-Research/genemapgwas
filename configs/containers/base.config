process {

  /*----------------------------------------------------* 
  *  plink is lightweight and one of the most popular
  *  tools in genomics. We'll use it to test singularity
  *-----------------------------------------------------*/

  withLabel: 'plink' {
    container = "sickleinafrica/plink:latest"
  }

  withLabel: 'king' {
    container = "sickleinafrica/king:2.3.2"
  }

  withLabel: 'gencall' {
    container = "sickleinafrica/gencall:latest"
  }

  withLabel: 'rbase' {
    container = "sickleinafrica/rbase-rehh:latest"
  }

  withLabel: 'idat_to_gtc' {
    time  = { 90.m * task.attempt }
    memory  = { 50.GB * task.attempt }
    cpus  = { 8 * task.attempt }
  }

  withLabel: 'gtc_to_vcf' {
    time  = { 10.h * task.attempt }
    memory  = { 50.GB * task.attempt }
    cpus  = { params.threads * task.attempt }
  }

  errorStrategy = { task.exitStatus in [135,136,137,140,143,255] ? 'retry' : 'terminate' }
  maxRetries = 3
  maxErrors = '-1'

}
